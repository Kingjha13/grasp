<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8" />-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>-->
<!--    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>-->
<!--    <title>VR Viewer</title>-->
<!--    <style>-->
<!--        body {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            overflow: hidden;-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            height: 100vh;-->
<!--        }-->

<!--        iframe {-->
<!--            width: 100vw;-->
<!--            height: 100vh;-->
<!--            border: none;-->
<!--        }-->

<!--        #toggleButton {-->
<!--            background-color: #6A0DAD;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            font-size: 13px;-->
<!--            cursor: pointer;-->
<!--            border-radius: 5px;-->
<!--            position: absolute;-->
<!--            top: 1px;-->
<!--            left: 1px;-->
<!--            z-index: 2;-->
<!--        }-->

<!--        #optionsBox {-->
<!--            display: none;-->
<!--            position: absolute;-->
<!--            top: 60px;-->
<!--            left: 20px;-->
<!--            background-color: white;-->
<!--            border: 1px solid #007bff;-->
<!--            border-radius: 5px;-->
<!--            padding: 10px;-->
<!--            z-index: 1;-->
<!--            width: 160px;-->
<!--        }-->

<!--        #optionsBox {-->
<!--        display: none;-->
<!--        position: absolute;-->
<!--        top: 60px;-->
<!--        left: 20px;-->
<!--        background-color: white;-->
<!--        border: 1px solid #007bff;-->
<!--        border-radius: 5px;-->
<!--        padding: 15px;-->
<!--        z-index: 1;-->
<!--        width: 160px;-->
<!--        max-height: 70vh;-->
<!--        overflow-y: auto;-->
<!--        }-->

<!--        #bottomButtons {-->
<!--            display: flex;-->
<!--            position: absolute;-->
<!--            bottom: 15px;-->
<!--            left: 15px;-->
<!--            z-index: 2;-->
<!--        }-->

<!--        #prevButton, #nextButton {-->
<!--            background-color: #4CAF50;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            font-size: 16px;-->
<!--            cursor: pointer;-->
<!--            border-radius: 5px;-->
<!--            margin-right: 10px;-->
<!--            transition: background-color 0.3s ease;-->
<!--        }-->

<!--        #prevButton:hover, #nextButton:hover {-->
<!--            background-color: #45a049;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<button id="toggleButton">Select Topic</button>-->

<!--<div id="optionsBox"></div>-->

<!--<iframe-->
<!--        id="sketchfabIframe"-->
<!--        title="3D Model Viewer"-->
<!--        allowfullscreen-->
<!--        allow="autoplay; fullscreen; xr-spatial-tracking; camera; gyroscope"-->
<!--        src=""-->
<!--        frameborder="0"-->
<!--        style="position: absolute; top: 0; left: 0;">-->
<!--</iframe>-->

<!--<div id="bottomButtons">-->
<!--    <button id="prevButton"><&#45;&#45;</button>-->
<!--    <button id="nextButton">&ndash;&gt;</button>-->
<!--</div>-->

<!--<script>-->
<!--    const query = window.location.search.substring(1);-->
<!--    const currentUnit = query || "unit1";-->
<!--    const units = {-->
<!--        unit1: {-->
<!--            models: [-->
<!--                "https://avnishjha.8thwall.app/b2h6/",-->
<!--                "https://avnishjha.8thwall.app/b2h6/",-->
<!--                "https://avnishjha.8thwall.app/b2h6/",-->
<!--                "https://avnishjha.8thwall.app/b2h6/"-->
<!--            ],-->
<!--            labels: ["L_S of a Flower", "Stamen", "Cross Section Anatomy","Hibiscus Anatomy"]-->
<!--        },-->
<!--        Bc11a: {-->
<!--            models: [-->
<!--                "https://avnishjha.8thwall.app/b2h6/",-->
<!--                "https://avnishjha.8thwall.app/b2h6/",-->
<!--                "https://avnishjha.8thwall.app/b2h6/",-->
<!--                "https://avnishjha.8thwall.app/b2h6/",-->
<!--                "https://avnishjha.8thwall.app/b2h6/"-->
<!--            ],-->
<!--            labels: [ "Interactive Digital Herbarium","Elephant","Tiger","Hipo","Yellow Warbler"]-->
<!--        }-->


<!--};-->

<!--    let currentModelIndex = 0;-->
<!--    let optionsVisible = false;-->

<!--    const iframe = document.getElementById('sketchfabIframe');-->
<!--    const toggleButton = document.getElementById('toggleButton');-->
<!--    const optionsBox = document.getElementById('optionsBox');-->
<!--    const prevButton = document.getElementById('prevButton');-->
<!--    const nextButton = document.getElementById('nextButton');-->

<!--    function loadModel() {-->
<!--        iframe.src = units[currentUnit].models[currentModelIndex];-->
<!--    }-->

<!--    function createOptionButtons() {-->
<!--        optionsBox.innerHTML = "";-->
<!--        const labels = units[currentUnit].labels;-->

<!--        labels.forEach((label, index) => {-->
<!--            const btn = document.createElement("button");-->
<!--            btn.textContent = label;-->
<!--            btn.addEventListener("click", () => {-->
<!--                currentModelIndex = index;-->
<!--                loadModel();-->
<!--                hideOptions();-->
<!--            });-->
<!--            optionsBox.appendChild(btn);-->
<!--        });-->
<!--    }-->

<!--    function hideOptions() {-->
<!--        optionsBox.style.display = 'none';-->
<!--        optionsVisible = false;-->
<!--    }-->

<!--    function resetOptions() {-->
<!--        hideOptions();-->
<!--        toggleButton.style.display = 'block';-->
<!--    }-->

<!--    toggleButton.addEventListener('click', () => {-->
<!--        optionsVisible = !optionsVisible;-->
<!--        optionsBox.style.display = optionsVisible ? 'block' : 'none';-->
<!--    });-->

<!--    toggleButton.addEventListener('dblclick', resetOptions);-->

<!--    prevButton.addEventListener('click', () => {-->
<!--        const models = units[currentUnit].models;-->
<!--        currentModelIndex = (currentModelIndex - 1 + models.length) % models.length;-->
<!--        loadModel();-->
<!--    });-->

<!--    nextButton.addEventListener('click', () => {-->
<!--        const models = units[currentUnit].models;-->
<!--        currentModelIndex = (currentModelIndex + 1) % models.length;-->
<!--        loadModel();-->
<!--    });-->

<!--    iframe.addEventListener('dblclick', resetOptions);-->

<!--    createOptionButtons();-->
<!--    loadModel();-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>VR Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        iframe {
            width: 100vw;
            height: 100vh;
            border: none;
        }

        #toggleButton {
            background-color: #6A0DAD;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 13px;
            cursor: pointer;
            border-radius: 5px;
            position: absolute;
            top: 1px;
            left: 1px;
            z-index: 2;
        }

        #optionsBox {
            display: none;
            position: absolute;
            top: 60px;
            left: 20px;
            background-color: white;
            border: 1px solid #007bff;
            border-radius: 5px;
            padding: 15px;
            z-index: 1;
            width: 160px;
            max-height: 70vh;
            overflow-y: auto;
        }

        #bottomButtons {
            display: flex;
            position: absolute;
            bottom: 15px;
            left: 15px;
            z-index: 2;
        }

        #prevButton, #nextButton {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            margin-right: 10px;
            transition: background-color 0.3s ease;
        }

        #prevButton:hover, #nextButton:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

<button id="toggleButton">Select Topic</button>
<div id="optionsBox"></div>

<iframe
        id="sketchfabIframe"
        title="3D Model Viewer"
        allowfullscreen
        allow="autoplay; fullscreen; xr-spatial-tracking; camera; gyroscope"
        src=""
        frameborder="0"
        style="position: absolute; top: 0; left: 0;">
</iframe>

<div id="bottomButtons">
    <button id="prevButton"><--</button>
    <button id="nextButton">--></button>
</div>

<script>
    function getUnitParam() {
        const params = new URLSearchParams(window.location.search);
        return params.get("unit")?.toLowerCase() || "unit1";
    }

    const currentUnit = getUnitParam();

    const units = {
        unit1: {
            models: [
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/"
            ],
            labels: ["L_S of a Flower", "Stamen", "Cross Section Anatomy", "Hibiscus Anatomy"]
        },
        bc11a: {
            models: [
              "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/"
            ],
            labels: ["Interactive Digital Herbarium", "Elephant", "Tiger", "Hippo", "Yellow Warbler"]
        },
        bc11b: {
            models: [
              "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/",
                "https://avnishjha.8thwall.app/b2h6/"
            ],
            labels: ["golu", "avanish", "akj", "Hippo", "Yellow Warbler"]
        }
    };

    const unitData = units[currentUnit] || units["unit1"];

    let currentModelIndex = 0;
    let optionsVisible = false;

    const iframe = document.getElementById('sketchfabIframe');
    const toggleButton = document.getElementById('toggleButton');
    const optionsBox = document.getElementById('optionsBox');
    const prevButton = document.getElementById('prevButton');
    const nextButton = document.getElementById('nextButton');

    function loadModel() {
        iframe.src = unitData.models[currentModelIndex];
    }

    function createOptionButtons() {
        optionsBox.innerHTML = "";
        unitData.labels.forEach((label, index) => {
            const btn = document.createElement("button");
            btn.textContent = label;
            btn.style.display = 'block';
            btn.style.margin = '5px 0';
            btn.addEventListener("click", () => {
                currentModelIndex = index;
                loadModel();
                hideOptions();
            });
            optionsBox.appendChild(btn);
        });
    }

    function hideOptions() {
        optionsBox.style.display = 'none';
        optionsVisible = false;
    }

    function resetOptions() {
        hideOptions();
        toggleButton.style.display = 'block';
    }

    toggleButton.addEventListener('click', () => {
        optionsVisible = !optionsVisible;
        optionsBox.style.display = optionsVisible ? 'block' : 'none';
    });

    toggleButton.addEventListener('dblclick', resetOptions);
    iframe.addEventListener('dblclick', resetOptions);

    prevButton.addEventListener('click', () => {
        currentModelIndex = (currentModelIndex - 1 + unitData.models.length) % unitData.models.length;
        loadModel();
    });

    nextButton.addEventListener('click', () => {
        currentModelIndex = (currentModelIndex + 1) % unitData.models.length;
        loadModel();
    });

    createOptionButtons();
    loadModel();
</script>

</body>
</html>
